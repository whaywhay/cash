<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.control.DialogPane?>
<?import javafx.geometry.Insets?>
<DialogPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
  fx:controller="kz.store.cash.fx.controllers.payments.PaymentDialogController"
  stylesheets="@styles_payment.css" styleClass="dialog-pane" fx:id="paymentWindow">

  <content>
    <VBox spacing="12" alignment="TOP_CENTER">

      <!-- Шапка с итоговыми суммами -->
      <GridPane hgap="20" vgap="8">
        <columnConstraints>
          <ColumnConstraints halignment="LEFT"/>
          <ColumnConstraints halignment="RIGHT"/>
        </columnConstraints>
        <Label text="К оплате:" GridPane.rowIndex="0" GridPane.columnIndex="0"
          styleClass="label-amount"/>
        <Label fx:id="totalLabel" GridPane.rowIndex="0" GridPane.columnIndex="1"
          styleClass="label-value"/>
        <Label text="Получено:" GridPane.rowIndex="1" GridPane.columnIndex="0"
          styleClass="label-amount"/>
        <Label fx:id="receivedPaymentLabel" GridPane.rowIndex="1" GridPane.columnIndex="1"
          styleClass="label-value"/>
        <Label text="Осталось:" GridPane.rowIndex="2" GridPane.columnIndex="0"
          styleClass="label-amount"/>
        <Label fx:id="remainingPaymentLabel" GridPane.rowIndex="2" GridPane.columnIndex="1"
          styleClass="label-value"/>
        <Label text="Сдача:" GridPane.rowIndex="3" GridPane.columnIndex="0"
          styleClass="label-amount"/>
        <Label fx:id="changeMoneyLabel" GridPane.rowIndex="3" GridPane.columnIndex="1"
          styleClass="label-value"/>
      </GridPane>

      <!-- Переключатели режимов -->
      <HBox alignment="CENTER" styleClass="toggle-bar">
        <ToggleButton fx:id="cashButton" text="Наличная"
          onAction="#switchToCash"
          HBox.hgrow="ALWAYS" maxWidth="Infinity"
          styleClass="toggle-button"/>  <!-- styleClass="toggle-button expanded" -->
        <ToggleButton fx:id="cardButton" text="Безналичная"
          onAction="#switchToCard"
          HBox.hgrow="ALWAYS" maxWidth="Infinity"
          styleClass="toggle-button"/>  <!-- styleClass="toggle-button expanded" -->
        <ToggleButton fx:id="mixedButton" text="Смешанная"
          onAction="#switchToMixed"
          HBox.hgrow="ALWAYS" maxWidth="Infinity"
          styleClass="toggle-button"/> <!-- styleClass="toggle-button expanded" -->
      </HBox>

      <!-- Динамическая область для подгрузки cash/card/mixed -->
      <StackPane fx:id="modeContent" styleClass="mode-content"/>

      <!-- NumPad и быстрые суммы -->
      <HBox spacing="20">
        <!-- NumPad -->
        <GridPane hgap="5" vgap="5">
          <Button text="1" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="0"
            GridPane.columnIndex="0"/>
          <Button text="2" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="0"
            GridPane.columnIndex="1"/>
          <Button text="3" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="0"
            GridPane.columnIndex="2"/>
          <Button text="4" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="1"
            GridPane.columnIndex="0"/>
          <Button text="5" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="1"
            GridPane.columnIndex="1"/>
          <Button text="6" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="1"
            GridPane.columnIndex="2"/>
          <Button text="7" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="2"
            GridPane.columnIndex="0"/>
          <Button text="8" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="2"
            GridPane.columnIndex="1"/>
          <Button text="9" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="2"
            GridPane.columnIndex="2"/>
          <Button text="->" styleClass="digit-button" onAction="#onBackspace" GridPane.rowIndex="3"
            GridPane.columnIndex="0"/>
          <Button text="0" styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="3"
            GridPane.columnIndex="1"/>
          <Button text="." styleClass="digit-button" onAction="#onDigitPress" GridPane.rowIndex="3"
            GridPane.columnIndex="2"/>


          <Button text="+200" styleClass="payment-amount-button"
            onAction="#onAmountAdd" GridPane.rowIndex="0" GridPane.columnIndex="3">
            <GridPane.margin>
              <Insets left="20"/>
            </GridPane.margin>
          </Button>
          <Button text="+500" styleClass="payment-amount-button"
            onAction="#onAmountAdd"
            GridPane.rowIndex="0" GridPane.columnIndex="4"/>
          <Button text="+1000" styleClass="payment-amount-button"
            onAction="#onAmountAdd"
            GridPane.rowIndex="0" GridPane.columnIndex="5"/>
          <Button text="+2000" styleClass="payment-amount-button"
            onAction="#onAmountAdd" GridPane.rowIndex="1" GridPane.columnIndex="3">
            <GridPane.margin>
              <Insets left="20"/>
            </GridPane.margin>
          </Button>
          <GridPane.margin>
            <Insets left="20"/>
          </GridPane.margin>
          <Button text="+5000" styleClass="payment-amount-button"
            onAction="#onAmountAdd"
            GridPane.rowIndex="1" GridPane.columnIndex="4"/>
          <Button text="+10000" styleClass="payment-amount-button"
            onAction="#onAmountAdd"
            GridPane.rowIndex="1" GridPane.columnIndex="5"/>
          <Button text="+20000" styleClass="payment-amount-button"
            onAction="#onAmountAdd" GridPane.rowIndex="2" GridPane.columnIndex="3">
            <GridPane.margin>
              <Insets left="20"/>
            </GridPane.margin>
          </Button>
        </GridPane>
      </HBox>

      <!-- Кнопки Отмена/Оплата -->
      <HBox spacing="12" alignment="CENTER_RIGHT">
        <Button text="Отмена" styleClass="action-cancel-button" onAction="#onCancel"/>
        <Button text="Оплата" styleClass="action-button" onAction="#onPay"/>
      </HBox>
    </VBox>
  </content>
</DialogPane>
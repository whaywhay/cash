<?xml version="1.0" encoding="UTF-8"?>


<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.TextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.layout.ColumnConstraints?>
<BorderPane xmlns="http://javafx.com/javafx" fx:id="rootPane"
  xmlns:fx="http://javafx.com/fxml" fx:controller="kz.store.cash.fx.controllers.SalesController">
  <top>
    <HBox prefHeight="53.0" spacing="5.0" BorderPane.alignment="TOP_LEFT">
      <TextField fx:id="barCode" prefWidth="300.0">
        <padding>
          <Insets top="10.0"/>
        </padding>
      </TextField>
      <!--      <Button fx:id="keyBoardButton" onAction="#" text="KeyBoard" focusTraversable="false"/>-->
      <Label fx:id="matchStatusIcon"/>
      <Label fx:id="deferredPaymentReceipt"/>
      <BorderPane.margin>
        <Insets left="10.0"/>
      </BorderPane.margin>
      <padding>
        <Insets left="10.0" top="10.0"/>
      </padding>
    </HBox>

  </top>
  <center>
    <StackPane>
      <TableView fx:id="salesTable" editable="true">
        <placeholder>
          <Label/>
        </placeholder>
        <columnResizePolicy>
          <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
        </columnResizePolicy>
        <columns>
          <TableColumn fx:id="checkboxCol">
            <graphic>
              <CheckBox fx:id="headerCheckBox" onAction="#selectHeaderCheckBox"/>
            </graphic>
          </TableColumn>
          <TableColumn fx:id="indexCol" text="#"/>
          <TableColumn fx:id="nameCol" text="НАИМЕНОВАНИЕ"/>
          <TableColumn fx:id="priceCol" sortable="false">
            <graphic>
              <Label fx:id="priceHeaderLabel" text="ЦЕНА"/>
            </graphic>
          </TableColumn>
          <TableColumn fx:id="qtyCol" text="КОЛИЧЕСТВО"/>
          <TableColumn fx:id="totalCol" text="СУММА"/>
        </columns>
      </TableView>
    </StackPane>
  </center>
  <bottom>
    <HBox spacing="20" styleClass="sale-bottom-bar" minHeight="160.0">

      <VBox spacing="10" styleClass="sale-summary-box" alignment="CENTER_LEFT"
        minWidth="260.0" prefWidth="260.0">
        <GridPane>
          <columnConstraints>
            <ColumnConstraints hgrow="NEVER"  halignment="LEFT"/>
            <ColumnConstraints hgrow="ALWAYS" halignment="RIGHT"/>
          </columnConstraints>

          <Label GridPane.rowIndex="0" GridPane.columnIndex="0" text="ИТОГО" styleClass="summary-label"/>
          <Label GridPane.rowIndex="0" GridPane.columnIndex="1" fx:id="totalLabel" text="00.000" styleClass="summary-value"/>

          <Label GridPane.rowIndex="1" GridPane.columnIndex="0" text="ПОЛУЧЕНО" styleClass="sub-summary-label"/>
          <Label GridPane.rowIndex="1" GridPane.columnIndex="1" fx:id="receivedPaymentLabel" text="00.000" styleClass="sub-summary-value"/>

          <Label GridPane.rowIndex="2" GridPane.columnIndex="0" text="СДАЧА" styleClass="sub-summary-label"/>
          <Label GridPane.rowIndex="2" GridPane.columnIndex="1" fx:id="changeMoneyLabel" text="00.000" styleClass="sub-summary-value"/>
        </GridPane>
      </VBox>

      <Region HBox.hgrow="ALWAYS"/>

      <!-- Правая панель — резиновая сетка -->
      <GridPane hgap="10" vgap="10" alignment="CENTER_RIGHT">
        <columnConstraints>
          <ColumnConstraints percentWidth="33.33" hgrow="ALWAYS"/>
          <ColumnConstraints percentWidth="33.33" hgrow="ALWAYS"/>
          <ColumnConstraints percentWidth="33.33" hgrow="ALWAYS"/>
        </columnConstraints>

        <!-- ВАЖНО: maxWidth="Infinity" + разумный minWidth -->
        <Button text="БЫСТРЫЕ ТОВАРЫ" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="0" GridPane.columnIndex="0" focusTraversable="false" onAction="#onQuickProductsDialog"/>
        <Button text="КОЛИЧЕСТВО" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="0" GridPane.columnIndex="1" focusTraversable="false" onAction="#onQuantityDialog"/>
        <Button text="+" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="0" GridPane.columnIndex="2" focusTraversable="false" onAction="#onIncreaseQuantity"/>

        <Button text="ИЗМЕНИТЬ ТОВАР" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="1" GridPane.columnIndex="0" focusTraversable="false" onAction="#onEditProduct"/>
        <Button text="ОТЛОЖКА" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="1" GridPane.columnIndex="1" focusTraversable="false" onAction="#onDeferredReceiptsDialog"/>
        <Button text="ДОП. ФУНКЦИИ" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="1" GridPane.columnIndex="2" focusTraversable="false" onAction="#onAdditionalFunctionDialog"/>

        <Button text="УНИВЕРСАЛЬНЫЙ ПРОДУКТ" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="2" GridPane.columnIndex="0" focusTraversable="false" onAction="#onUniversalProductDialog"/>
        <Button text="КАТЕГОРИЯ ТОВАРОВ" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="2" GridPane.columnIndex="1" focusTraversable="false" onAction="#onCategoryProductDialog"/>
        <Button text="-" styleClass="sale-grid-btn" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="2" GridPane.columnIndex="2" focusTraversable="false" onAction="#onDecreaseQuantity"/>

        <Button text="УДАЛИТЬ" styleClass="sale-btn-delete" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.columnSpan="2" focusTraversable="false" onAction="#onDeleteSelectedOrChecked"/>
        <Button text="ОПЛАТА" styleClass="sale-btn-pay" maxWidth="Infinity" minWidth="140.0"
          GridPane.rowIndex="3" GridPane.columnIndex="2" focusTraversable="false" onAction="#onPaymentDialog"/>
      </GridPane>
    </HBox>
  </bottom>
</BorderPane>
